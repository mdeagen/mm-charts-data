{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {"url": "https://raw.githubusercontent.com/mdeagen/mm-charts-data/master/cG05/data/Iso_struct_idx_3.csv", "format":{"parse":{"wavevector_x":"number","wavevector_y":"number"}}},
  "transform": [
    {"filter":{"field": "wavevector_x","lt":52}},
    {"filter":{"field": "wavevector_y","lt":52}}
  ],
  "vconcat":[
    {
      "width":500,
      "height":500,
      "transform": [
        {"filter":{"selection":"brush1"}},
        {"filter":{"selection":"brush2"}}
      ],
      "mark": {"type": "point","clip": true},
      "encoding": {
        "x": {"field": "wavevector_x", "type": "quantitative", "scale":{"domain":[0,3.14], "nice":false}},
        "y": {"field": "wavevector_y", "type": "quantitative", "scale":{"domain":[0,3.14], "nice":false}},
        "color":{"field":"eig_idx","type": "nominal", "scale":{"domain":[1,2,3,4,5,6,7,8]}},
        "tooltip":[
          {"field":"frequency","type": "quantitative"},
          {"field":"path_id","type": "quantitative"},
          {"field":"sequence_id","type": "quantitative"}
        ]
      }
    },
    {
      "hconcat": [
        {
          "transform": [
            {"filter":{"selection":"brush2"}}
          ],
          "selection": {
            "brush1":{"type": "interval","encodings": ["x"]}
          },
          "mark":"tick",
          "encoding": {
            "x":{"field":"frequency","type": "quantitative"}
          }
        },
        {
          "transform": [
            {"filter":{"selection":"brush1"}}
          ],
          "selection": {
            "brush2":{"type": "interval","encodings": ["x"]}
          },
          "mark":"tick",
          "encoding": {
            "x":{"field":"path_id","type": "quantitative"}
          }
        }
      ]
    },
    
    {
      "hconcat": [
        {
          "transform": [
            {"sample": 3000}
          ],
          "mark": {"type": "point","clip": true},
          "encoding": {
            "x": {"field": "wavevector_x", "type": "quantitative", "scale":{"domain":[0,3.14], "nice":false}},
            "y": {"field": "frequency", "type": "quantitative"},
            "color":{
              "condition":{
                "selection":"brush1","field":"eig_idx","type": "nominal"
              },"value":"#ddd"
            },
            "opacity":{
              "condition":{
                "selection":"brush1","value":1
              },"value":0.3
            }
          }
        },
        {
          "transform": [
            {"sample": 3000}
          ],
          "mark": {"type": "point","clip": true},
          "encoding": {
            "x": {"field": "wavevector_y", "type": "quantitative", "scale":{"domain":[0,3.14], "nice":false}},
            "y": {"field": "frequency", "type": "quantitative"},
            "color":{
              "condition":{
                "selection":"brush1","field":"eig_idx","type": "nominal"
              },"value":"#ddd"
            },
            "opacity":{
              "condition":{
                "selection":"brush1","value":1
              },"value":0.3
            }
          }
        }
      ]
    }
    
  ]
  
}
